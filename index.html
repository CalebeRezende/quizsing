<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Roleta da MultiplicaÃ§Ã£o â€” 5/5 para vencer</title>
<style>
  :root{
    --bg:#0f1220; --card:#171a2b; --muted:#a7b0c5; --text:#f4f6ff; --accent:#7bd389;
    --danger:#ff6b6b; --ok:#69db7c; --ring:#3a3f66;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;
    background: radial-gradient(1200px 700px at 70% -10%, #1b1f35 0%, #0f1220 60%), var(--bg);
    color:var(--text); display:flex; min-height:100vh; align-items:center; justify-content:center; padding:24px;
  }
  .wrap{
    width:min(920px,100%); background:color-mix(in srgb, var(--card) 88%, rgba(255,255,255,0));
    border:1px solid #22253a; border-radius:18px; box-shadow: 0 12px 40px rgba(0,0,0,.35);
    overflow:hidden;
  }
  header{padding:22px 22px 0}
  header h1{margin:0 0 6px; font-size:clamp(20px,3vw,28px)}
  header p{margin:0 0 16px; color:var(--muted)}
  .board{
    display:grid; grid-template-columns: 1fr 1fr; gap:18px; padding:18px 22px 8px;
  }
  .wheel{
    background:#111528; border:1px solid #24294a; border-radius:16px; padding:22px;
    display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:180px;
    position:relative; overflow:hidden;
  }
  .wheel::after{
    content:""; position:absolute; inset:0; pointer-events:none;
    background: radial-gradient(300px 120px at center, rgba(255,255,255,.08), transparent 60%);
  }
  .wheel-label{font-size:14px; color:var(--muted); letter-spacing:.08em; text-transform:uppercase; margin-bottom:8px}
  .number{
    font-weight:800; font-size:56px; letter-spacing:.02em;
    text-shadow: 0 4px 18px rgba(0,0,0,.35);
  }
  .spin{
    animation: spinFlick 1.2s ease-out;
  }
  @keyframes spinFlick{
    0% { transform: translateY(0) scale(1); filter: blur(0px); opacity:.8;}
    30%{ transform: translateY(6px) scale(1.02); filter: blur(1px); opacity:.9;}
    100%{ transform: translateY(0) scale(1); filter: blur(0); opacity:1;}
  }
  .controls{
    display:grid; grid-template-columns: 1.1fr 1fr auto; gap:12px; padding:8px 22px 22px;
  }
  .btn{
    appearance:none; border:1px solid #2a2f54; background:#1a1f3a; color:var(--text);
    padding:14px 16px; border-radius:12px; cursor:pointer; font-weight:700; letter-spacing:.02em;
    transition: .15s ease-in-out; box-shadow: inset 0 -2px 0 rgba(0,0,0,.25);
  }
  .btn:hover{transform: translateY(-1px); border-color:#3b4277}
  .btn:disabled{opacity:.6; cursor:not-allowed; transform:none}
  .btn.primary{ background: linear-gradient(180deg, #2b9e6c, #1f7f57); border-color:#2b9e6c;}
  .btn.primary:hover{ filter:brightness(1.05)}
  .input{
    background:#111528; border:1px solid #23284a; color:var(--text);
    padding:14px; border-radius:12px; font-size:16px; outline:none; width:100%;
  }
  .statusbar{
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 22px; border-top:1px dashed #262a4a; color:var(--muted); gap:10px; flex-wrap:wrap;
  }
  .pill{ background:#12152a; border:1px solid #262a4a; padding:6px 10px; border-radius:999px; color:#cbd3ea; font-size:14px}
  .score{ color:var(--accent); font-weight:800}
  .log{
    display:none; padding:18px 22px 24px; border-top:1px solid #24294a; background:#0e1224;
  }
  .log.show{ display:block}
  table{ width:100%; border-collapse:collapse; overflow:hidden; border-radius:12px; border:1px solid #24294a}
  th, td{ padding:12px 10px; text-align:center}
  thead th{ background:#141834; color:#c6ceea; font-weight:700; font-size:14px}
  tbody tr:nth-child(odd){ background:#0f1430}
  tbody tr:nth-child(even){ background:#11183a}
  .ok{ color:var(--ok); font-weight:700}
  .no{ color:var(--danger); font-weight:700}
  .final{
    margin:14px 0 0; padding:12px 14px; background:#10162e; border:1px solid #242a52; border-radius:12px;
  }
  .celebrate{ font-size:22px; }
  @media (max-width:760px){
    .board{ grid-template-columns: 1fr;}
    .controls{ grid-template-columns: 1fr 1fr; }
    .controls .wide{ grid-column: 1 / -1;}
  }
</style>
</head>
<body>
  <div class="wrap" id="app">
    <header>
      <h1>Roleta da MultiplicaÃ§Ã£o</h1>
      <p>Gire duas roletas (1â€“100), multiplique os nÃºmeros e responda. VocÃª tem <strong>5 perguntas</strong> â€” precisa fazer <strong>5/5</strong> para vencer!</p>
    </header>

    <section class="board">
      <div class="wheel">
        <div class="wheel-label">Roleta A</div>
        <div id="numA" class="number">â€“</div>
      </div>
      <div class="wheel">
        <div class="wheel-label">Roleta B</div>
        <div id="numB" class="number">â€“</div>
      </div>
    </section>

    <section class="controls">
      <button id="startBtn" class="btn primary">Iniciar</button>
      <input id="answer" class="input" type="number" inputmode="numeric" placeholder="Digite o produto (A Ã— B)" disabled />
      <button id="submitBtn" class="btn" disabled>Responder</button>
      <div class="wide" id="hint" style="color:#cbd3ea; font-size:14px; padding:2px 4px;"></div>
    </section>

    <div class="statusbar">
      <span class="pill">Pergunta: <strong id="qIdx">0</strong>/5</span>
      <span class="pill">Pontos: <span class="score" id="score">0</span>/5</span>
      <span class="pill" id="statusText">Clique em <strong>Iniciar</strong> para comeÃ§ar</span>
    </div>

    <section class="log" id="results">
      <h3 style="margin:0 0 12px;">Resultados</h3>
      <div class="tablewrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>A</th>
              <th>B</th>
              <th>Resposta do usuÃ¡rio</th>
              <th>Correta</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
      <div class="final" id="finalMsg"></div>
    </section>
  </div>

<script>
(function(){
  const numAEl = document.getElementById('numA');
  const numBEl = document.getElementById('numB');
  const startBtn = document.getElementById('startBtn');
  const submitBtn = document.getElementById('submitBtn');
  const answerEl = document.getElementById('answer');
  const qIdxEl = document.getElementById('qIdx');
  const scoreEl = document.getElementById('score');
  const statusText = document.getElementById('statusText');
  const results = document.getElementById('results');
  const tbody = document.getElementById('tbody');
  const finalMsg = document.getElementById('finalMsg');
  const hint = document.getElementById('hint');

  let currentA = null, currentB = null;
  let question = 0;
  let score = 0;
  let playing = false;
  const history = []; // {a,b,user,correct,ok}

  function randInt(min, max){
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function spinOne(el, duration=1200, step=40){
    return new Promise(resolve=>{
      const final = randInt(1,100);
      let elapsed = 0;
      el.classList.add('spin');
      const t = setInterval(()=>{
        el.textContent = randInt(1,100);
        elapsed += step;
        if(elapsed >= duration){
          clearInterval(t);
          el.textContent = final;
          setTimeout(()=> el.classList.remove('spin'), 80);
          resolve(final);
        }
      }, step);
    });
  }

  async function spinBoth(){
    startBtn.disabled = true;
    submitBtn.disabled = true;
    answerEl.disabled = true;
    answerEl.value = '';
    hint.textContent = '';

    statusText.innerHTML = 'Girando roletasâ€¦';
    const [a,b] = await Promise.all([spinOne(numAEl), spinOne(numBEl)]);
    currentA = a; currentB = b;

    statusText.innerHTML = `Resolva: <strong>${a} Ã— ${b}</strong>`;
    answerEl.disabled = false;
    answerEl.focus();
    submitBtn.disabled = false;
  }

  function resetGame(){
    currentA = currentB = null;
    question = 0;
    score = 0;
    history.length = 0;
    qIdxEl.textContent = '0';
    scoreEl.textContent = '0';
    numAEl.textContent = 'â€“';
    numBEl.textContent = 'â€“';
    statusText.innerHTML = 'Clique em <strong>Iniciar</strong> para comeÃ§ar';
    startBtn.textContent = 'Iniciar';
    results.classList.remove('show');
    tbody.innerHTML = '';
    finalMsg.innerHTML = '';
    answerEl.value = '';
    answerEl.disabled = true;
    submitBtn.disabled = true;
    startBtn.disabled = false;
    playing = false;
  }

  function endGame(){
    // monta tabela
    tbody.innerHTML = '';
    history.forEach((h,i)=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${i+1}</td>
        <td>${h.a}</td>
        <td>${h.b}</td>
        <td>${h.user}</td>
        <td>${h.correct}</td>
        <td class="${h.ok ? 'ok':'no'}">${h.ok ? 'âœ” Acertou':'âœ– Errou'}</td>
      `;
      tbody.appendChild(tr);
    });
    const perfect = score === 5;
    const emoji = perfect ? 'ðŸŽ‰âœ¨' : 'ðŸ“Š';
    finalMsg.innerHTML = `<div class="${perfect?'celebrate':''}">
      ${emoji} Resultado final: <strong>${score}/5</strong> ${perfect ? 'â€” Perfeito, 100% de aproveitamento!':'â€” VocÃª precisa de 5/5 para vencer. Tente novamente!'}
    </div>`;
    results.classList.add('show');
    statusText.innerHTML = 'Jogo concluÃ­do.';
    startBtn.textContent = 'Jogar de novo';
    startBtn.disabled = false;
    submitBtn.disabled = true;
    answerEl.disabled = true;
    playing = false;
  }

  async function nextRound(){
    if(question >= 5){ return; }
    qIdxEl.textContent = String(question + 1);
    await spinBoth();
  }

  // Eventos
  startBtn.addEventListener('click', async ()=>{
    if(playing === false){
      resetGame(); // garante reset visÃ­vel
      playing = true;
      startBtn.textContent = 'Em andamentoâ€¦';
      startBtn.disabled = true;
      await nextRound();
    }
  });

  function handleSubmit(){
    if(!playing) return;
    const val = answerEl.value.trim();
    if(val === ''){
      hint.textContent = 'Digite uma resposta antes de enviar.';
      return;
    }
    const user = Number(val);
    const correct = currentA * currentB;
    const ok = (user === correct);
    history.push({a: currentA, b: currentB, user, correct, ok});
    if(ok){ score++; scoreEl.textContent = String(score); }

    question++;
    if(question >= 5){
      // Finaliza â€” sÃ³ agora mostramos quem acertou/errou
      submitBtn.disabled = true;
      answerEl.disabled = true;
      startBtn.disabled = true;
      statusText.innerHTML = 'Processando resultadoâ€¦';
      setTimeout(endGame, 400);
    }else{
      // PrÃ³xima rodada
      submitBtn.disabled = true;
      answerEl.disabled = true;
      startBtn.disabled = true;
      statusText.innerHTML = `Pergunta ${question+1} de 5 â€” preparandoâ€¦`;
      setTimeout(nextRound, 300);
    }
  }

  submitBtn.addEventListener('click', handleSubmit);
  answerEl.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){ handleSubmit(); }
  });

  // Inicializa
  resetGame();
})();
</script>
</body>
</html>